<!DOCTYPE html>
<html>
<head>
  <!-- inject:animerawidget:js -->
  <!-- endinject -->
  <link href='https://fonts.googleapis.com/css?family=Palanquin+Dark' rel='stylesheet' type='text/css'>
</head>
<body onresize="resize()">
  <div id="outer">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
  	 viewBox="0 0 150 150" enable-background="new 0 0 150 150" xml:space="preserve" style="transform:scale(0.8);">
  <g id="cogwheel" style="transform-origin: 50% 50%;" mqtt='bind_topic_to_rotation("www/rotation2",true,null,[100,20000],[0,0.12],true);'>
  	<path fill="#545353" stroke="#000000" stroke-miterlimit="10" d="M148.9,79.6c-0.8-0.9-16.2-6-17.4-6.9c-1.1-0.9-2.3-9.2-1.5-10.4
  		c0.8-1.2,14.1-10.6,14.6-11.7c0.5-1.1-0.8-3.3-1.2-4.4c-0.4-1-1.2-3.5-2.3-3.9c-1.1-0.4-17.3,3.1-18.5,2.3c-2.3-1.4-5.3-6.2-6-8.8
  		c-0.4-1.4,6.4-16.4,6.3-17.6c-0.1-1.2-2.4-2.4-3.4-3.1c-0.9-0.7-2.9-2.4-4-2.1c-1.2,0.3-13.2,11.2-14.6,11.7c-1.3,0.6-9-2.7-9.6-4
  		c-0.6-1.3-2-17.5-2.7-18.5c-0.7-1-3.3-1-4.4-1.2c-1.1-0.1-3.6-0.8-4.6,0c-0.9,0.8-6.2,16.5-7.4,17.1c-2.4,1.2-8,1.4-10.6,0.7
  		C60.1,18.5,50.6,5,49.5,4.5c-1.1-0.5-3.3,0.8-4.4,1.3c-1,0.5-3.5,1.2-3.9,2.4c-0.4,1.1,2.8,17.1,2.7,18.5c-0.2,1.4-6.5,6.8-7.9,6.7
  		c-1.4-0.1-16.3-6.8-17.5-6.7c-1.2,0.1-2.5,2.4-3.2,3.3c-0.7,0.9-2.5,2.8-2.2,4c0.2,1.2,11.4,13.4,11.4,14.8
  		c-0.1,2.7-2.7,7.7-4.6,9.6c-1,1-17.4,2.8-18.4,3.5c-1,0.7-0.9,3.3-1,4.5c-0.1,1.1-0.6,3.7,0.2,4.6s16.3,5.8,17.5,6.7
  		c1.2,0.9,2.2,9.1,1.4,10.3C18.8,89.1,5.5,98.5,5,99.6s0.8,3.3,1.2,4.4c0.4,1.1,1.2,3.5,2.3,3.9c1.1,0.4,17.3-3,18.6-2.2
  		c2.2,1.4,5.3,6.2,5.9,8.8c0.4,1.4-6.5,16.4-6.4,17.6c0.1,1.2,2.4,2.4,3.3,3.1c0.9,0.7,2.8,2.4,4,2.2c1.2-0.2,13.3-11.1,14.6-11.6
  		c1.3-0.6,8.5,2.7,9.1,4c0.6,1.3,2.2,17.5,2.9,18.5c0.7,1,3.3,1,4.4,1.1c1.1,0.1,3.7,0.7,4.6-0.1c0.9-0.8,5.9-16.6,7.2-17.3
  		c2.3-1.2,8-1.5,10.6-0.8c1.4,0.4,11.1,13.7,12.2,14.2c1.1,0.5,3.3-0.9,4.3-1.4c1-0.5,3.5-1.3,3.9-2.4c0.4-1.1-3.1-17-2.9-18.5
  		c0.2-1.4,6.8-6.5,8.3-6.3c1.4,0.1,16.2,7,17.4,6.9c1.2-0.1,2.5-2.3,3.2-3.2c0.7-0.9,2.5-2.8,2.3-4c-0.2-1.2-11.2-13.5-11.2-15
  		c0.1-2.7,2.8-7.7,4.7-9.5c1-1,17.4-2.5,18.4-3.2c1-0.7,0.9-3.3,1-4.4C149.2,83,149.7,80.5,148.9,79.6z M74.8,118.2
  		c-24,0-43.4-19.4-43.4-43.4c0-24,19.4-43.4,43.4-43.4c24,0,43.4,19.4,43.4,43.4C118.2,98.7,98.8,118.2,74.8,118.2z"/>
  </g>
  </svg>
  <div id="value" class="text" onresize="text_resize()">   -    W</div>
</div>
<script>
//If running stand alone.
if (window == window.parent) {
  document.getElementById("outer").style.width = "40%";
  document.getElementById("outer").style["padding-left"] = "30%";
  //document.getElementById("outer").style.height = "100vh";
}

function resize() {
  document.getElementById("value").style.fontSize = document.getElementById("value").offsetWidth / 6 + "pt";
  document.getElementById("outer").style.height = document.getElementById("value").offsetWidth + "px";
}
resize();
AnimeraWidget.init({
  server: 'http://op-en.se:5000',
  topic: 'test/topic1',
  subproperty: "power",
  max: 10000,
  unit: " W",
  outputRange: [0, 0.12],
  clamp: true,
  decimals: 0
}).then(function (objects) {
  var settings = objects.settings;
  var controller = objects.animera.getController(settings.server)

  controller.bindTopicToHtml(document.getElementById("value"), settings)
  controller.bindTopicToRotation(document.getElementById("cogwheel"), settings)
})
</script>
<style>
  .text {
    background-color: none;
    font-size: 18pt;
    font-family: 'Palanquin Dark', sans-serif;
    position: relative;
    left: 0%;
    top: -22%;
    width: 100%;
    height: 40%;
    text-align: center;
    z-index:10;
  }

  .test {
    background-color: none;
    border: 3px solid blue;
    border-color: black;

  }
</style>
</body>
