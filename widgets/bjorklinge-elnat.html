<!DOCTYPE html>
<html>
<head>
  <!-- inject:animerawidget:js -->
  <!-- endinject -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Palanquin+Dark' rel='stylesheet' type='text/css'>
</head>
<body onresize="resize()">
  <div id="outer">
		<?xml version="1.0" encoding="utf-8"?>
		<!-- Generator: Adobe Illustrator 18.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
		<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			 viewBox="0 0 1007.4 712.3" enable-background="new 0 0 1007.4 712.3" xml:space="preserve">
		<g>
			<polygon opacity="0.62" fill="#919B91" stroke="#000000" stroke-width="6" stroke-miterlimit="10" points="234.2,117.7
				261.5,141.4 299.8,209.4 324.1,214.3 319.8,240.4 305.9,281.1 309.5,304.2 391.5,324.2 393.3,345.5 402.4,356.1 419.3,344.1
				434.9,342.8 450.3,354.1 453.9,343.9 509.7,333.1 514,316.6 522.8,310.9 535,313.6 545.6,303.9 596.3,306.8 571.9,374.2
				649.4,353.8 683.7,356.8 685.5,308.7 682.4,292.8 695.7,288.3 699.8,279.7 706.3,284.2 724.2,277.5 729.4,270.5 749.7,267.1
				770.7,279.5 781.8,296.4 799.4,284 808.9,305.5 836.5,293.7 858.7,296.7 860,327.6 864.3,339.4 862.9,375.1 874.2,395.7
				875.1,424.4 866.6,424.4 834.2,435.4 809.6,439.5 793.3,447 776.6,443.8 770.3,443.8 758.1,452.8 737.5,459.6 726.4,475 687.3,475
				671.1,496.2 662.5,498.3 657.7,480.9 649.4,479.7 639.2,469.1 615.7,477.5 564.4,468.7 501.8,468.2 496.2,458.3 489.4,460.7
				472,453.1 458.9,465.5 453.2,496.7 455.2,507.8 450.7,558.8 442.4,573.1 430.4,560.4 398.5,569.7 369.8,556.3 360.8,539.6
				314.7,559.3 283.3,535.3 265,500.1 258.4,484 243.3,473.2 227.7,465.3 210.9,467.1 210.9,454.9 187.4,444 185.2,428 192,418
				185.2,408.3 184.1,399 178.4,392.9 173.2,374.9 158.7,356.8 163.7,352 163,343.9 168.9,334.9 163.7,329.4 165.5,300.1 158.7,287.4
				149.7,284.9 145.4,279.7 143.2,240.2 160.8,202.4 133,195.9 134.1,192.5 156.5,190.5 164.4,168.5 177.7,158.1 173.7,148.4
				190.4,138.5 206,136.9 214.6,127.2 	"/>
			<rect x="189.9" y="231.7" fill="none" width="70.2" height="15.6"/>
			<text transform="matrix(1 0 0 1 189.8753 240.2422)" font-family="'PT Sans'" font-size="12">ÖSTERVÅLA</text>
			<rect x="348" y="417" fill="none" width="76.4" height="23.4"/>
			<text transform="matrix(1 0 0 1 348.0115 425.4927)" font-family="'PT Sans'" font-size="12">BJÖRKLINGE</text>
			<circle stroke="#000000" stroke-width="10" stroke-miterlimit="10" cx="218.8" cy="259.8" r="3.9"/>
			<circle stroke="#000000" stroke-width="10" stroke-miterlimit="10" cx="428.5" cy="420.9" r="3.9"/>
		</g>
		<g>

				<line id="flow3" class="cls-1" fill="none" stroke="#1589B7" stroke-width="10" stroke-miterlimit="10" x1="220.9" y1="210.1" x2="143.7" y2="96.9"/>

				<line id="flow2" class="cls-1" fill="none" stroke="#1589B7" stroke-width="10" stroke-miterlimit="10" x1="418.5" y1="486.1" x2="449.1" y2="619.6"/>

				<line id="flow1" class="cls-1" fill="none" stroke="#1589B7" stroke-width="10" stroke-miterlimit="10" x1="762.8" y1="345.4" x2="847.6" y2="237.7"/>
		</g>
		<g>
			<circle fill="#FFFFFF" stroke="#000000" stroke-width="6" stroke-miterlimit="10" cx="461.4" cy="655" r="49.2"/>
			<text transform="matrix(1 0 0 1 438.779 686.1487)" font-family="'PT Sans'" font-size="29">MW</text>
		</g>
		<g>
			<circle fill="#FFFFFF" stroke="#000000" stroke-width="6" stroke-miterlimit="10" cx="122" cy="68.5" r="49.2"/>
			<text transform="matrix(1 0 0 1 99.373 99.6783)" font-family="'PT Sans'" font-size="29">MW</text>
		</g>
		<g>
			<circle fill="#FFFFFF" stroke="#000000" stroke-width="6" stroke-miterlimit="10" cx="872.1" cy="210.1" r="49.2"/>
			<text transform="matrix(1 0 0 1 849.4965 241.2772)" font-family="'PT Sans'" font-size="29">MW</text>
		</g>
		</svg>



  <div id="value" class="text" onresize="text_resize()">   -    W</div>
</div>
<script>
//If running stand alone.
if (window == window.parent) {
  document.getElementById("outer").style.width = "40%";
  document.getElementById("outer").style["padding-left"] = "30%";
  document.getElementById("outer").style["padding-top"] = window.innerHeight/4 + "px"
  document.getElementById("outer").style.height = window.innerHeight/3 + "px"
}

function resize() {
  document.getElementById("value").style.fontSize = document.getElementById("value").offsetWidth / 6 + "pt";
  //document.getElementById("outer").style.height = document.getElementById("value").offsetWidth + "px";
  console.log(window.innerHeight);
  if (window == window.parent) {
    //document.getElementById("outer").style.height = window.innerHeight/3 + "px"
    document.getElementById("outer").style["padding-top"] = (window.innerHeight - (window.innerHeight/3))/2 + "px"
    console.log("test");
  }
}
resize();

AnimeraWidget.init({
  server: 'https://op-en.se',
  topic: 'test/signalA',
  subproperty: "power",
  max: 10000,
  unit: " W",
  outputRange: [0, 1000],
  color: "rgb(0,158,194)",
  width: 30,
  clamp: true,
  decimals: 0
}).then(function (objects) {
  var settings = objects.settings;
  var controller = objects.animera.getController(settings.server)
  //document.getElementById("flow").style["stroke-width"] = "" + settings["width"]
  //document.getElementById("flow").style["stroke"] = "" + settings.color
  //controller.bindTopicToHtml(document.getElementById("value"), settings)
  //controller.bind_topic_to_style(document.getElementById("loop"), settings)
  //controller.bindTopicToCallback(function(data){ChangeSpeed(data,settings)},settings)

  //settings.topic = "Testsites/Bjorklinge/meters/8604/meterevent"
  console.log(settings.topic);

  settings.topic = "test/signalA"
  var cntrl = controller.animateStyle("flow1","stroke-dashoffset",null,settings)

  settings.topic = "test/signalB"
  var cntrl = controller.animateStyle("flow2","stroke-dashoffset",null,settings)

  settings.topic = "test/signal3"
  var cntrl = controller.animateStyle("flow3","stroke-dashoffset",null,settings)



  //For debugging
  window.loop = cntrl
  window._controller = controller


})



</script>
<style>
  .text {
    background-color: none;
    font-size: 18pt;
    font-family: 'Palanquin Dark', sans-serif;
    position: relative;
    left: 0%;
    top: -20%;
    width: 100%;
    height: 40%;
    text-align: center;
    z-index:10;
  }

  .test {
    background-color: none;
    border: 3px solid blue;
    border-color: black;

  }
  .cls-1 {
    border-color: "#FFFE1C";
    stroke-dasharray: 0 30;
    stroke-dashoffset: 30;
    stroke-width:16;
    /*i pixlar*/
    transition: stroke-dashoffset linear 1s;
    stroke-linecap:round;
  }


}
</style>
</body>
<!-- http://localhost:8080/dist/widgets/widget-loop.html?topic=test/signalB -->
