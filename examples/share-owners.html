<!DOCTYPE html>
  <html>
  <head>

  <script src="../widgetutils.js" type="text/javascript"></script>
  <link href='https://fonts.googleapis.com/css?family=Palanquin+Dark' rel='stylesheet' type='text/css'>

  </head>
  <body onresize="resize()"> 

<div id="outer" >

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">


<g id="i9">
	<g>
		<path class="c9" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M81.9,42.8v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1v8.7c0,0,5.8,4,15.8,4C76.5,46.8,81.9,42.8,81.9,42.8z"/>
		<circle class="c9" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="66.3" cy="15" r="9.2"/>
	</g>
</g>
<g id="i8">
	<g>
		<path class="c8" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M64.6,39.3v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1v8.7c0,0,5.8,4,15.8,4C59.2,43.3,64.6,39.3,64.6,39.3z"/>
		<circle class="c8" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="49" cy="11.5" r="9.2"/>
	</g>
</g>
<g id="i7">
	<g>
		<path class="c7" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M48.2,44v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1V44c0,0,5.8,4,15.8,4C42.7,48,48.2,44,48.2,44z"/>
		<circle class="c7" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="32.6" cy="16.2" r="9.2"/>
	</g>
</g>
<g id="i6">
	<g>
		<path class="c6" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M91.3,49.9v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1v8.7c0,0,5.8,4,15.8,4C85.9,53.9,91.3,49.9,91.3,49.9z"/>
		<circle class="c6" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="75.7" cy="22" r="9.2"/>
	</g>
</g>
<g id="i5">
	<g>
		<path class="c5" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M65,48.7v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1v8.7c0,0,5.8,4,15.8,4C59.6,52.7,65,48.7,65,48.7z"/>
		<circle class="c5" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="49.4" cy="20.9" r="9.2"/>
	</g>
</g>
<g id="i4">
	<g>
		<path class="c4" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M39.1,50.3v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1v8.7c0,0,5.8,4,15.8,4C33.7,54.3,39.1,50.3,39.1,50.3z"/>
		<circle class="c4" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="23.5" cy="22.4" r="9.2"/>
	</g>
</g>
<g id="i3">
	<g>
		<path class="c3" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M78,57.7v-8.7C78,43,72.9,38,66.8,38h-8.7
			C52.1,38,47,43,47,49.1v8.7c0,0,5.8,4,15.8,4C72.5,61.7,78,57.7,78,57.7z"/>
		<circle class="c3" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="62.4" cy="29.9" r="9.2"/>
	</g>
</g>
<g id="i2">
	<g>
		<path class="c2" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M51.7,58.1v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1v8.7c0,0,5.8,4,15.8,4C46.3,62.1,51.7,58.1,51.7,58.1z"/>
		<circle class="c2" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="36.1" cy="30.3" r="9.2"/>
	</g>
</g>
<g id="i1">
	<g>
		<path class="c1" stroke="#FFFFFF" stroke-width="4" stroke-miterlimit="10" d="M65,65.6v-8.7c0-6.1-5-11.1-11.1-11.1h-8.7
			c-6.1,0-11.1,5-11.1,11.1v8.7c0,0,5.8,4,15.8,4C59.6,69.6,65,65.6,65,65.6z"/>
		<circle class="c1" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" cx="49.4" cy="37.7" r="9.2"/>
	</g>
</g>

</svg>

<div id="value2" class="text" onresize="resize()">?</div>   

</div>

 <script> 

  //If running stand alone. 
  if (window == window.parent) {
      document.getElementById("outer").style.width = "40%";
      document.getElementById("outer").style["padding-left"] = "30%";
      document.getElementById("outer").style["padding-top"] = "10%";

  }

  function resize() {
    document.getElementById("value2").style.fontSize = document.getElementById("value2").offsetWidth / 6 + "pt";
    document.getElementById("outer").style.height = document.getElementById("outer").offsetWidth + "px";
    console.log("text_resize");

  }

  resize();

  function setnumber(n=9) {

  	var items;

  	for (i=1;i<11;i++) {
  		items = document.getElementsByClassName("c" +i);

  		for (var j = 0;j < items.length;j++) {
  			if (i < n+1)
	  			items[j].setAttribute("fill","#00000");
	  		else
	  			items[j].setAttribute("fill","#BBBBBB");
  		}

  	}

  }

  setnumber();

  function init_widget(datahub) {

    console.log(widgetutils.paramArray);

    var server = widgetutils.paramArray["server"];
    var topic = widgetutils.paramArray["topic"];
    var subproperty = widgetutils.paramArray["subproperty"];
    var max = widgetutils.paramArray["max"];

    var appserver = datahub.getdatasource("op-en_appserver",server);
  


    //Bind text and animation to data. 
    appserver.bind_topic_to_html(document.getElementById("value2"),topic,subproperty,"");
    //appserver.bind_topic_to_rotation("sun", topic,true,subproperty,[0,max],[0,0.12],true);

    appserver.subscribe_to_subproperty(topic,subproperty,function (topic,data) {
    //appserver.subscribe(topic,function (topic,data) {

    	setnumber(parseInt(data));

    });


  }

  widgetutils.init();



</script>

  

  <style>

  .text {
  background-color: none;
  font-size: 18pt; 
  font-family: 'Palanquin Dark', sans-serif;
  position: relative; 
  left: 0%; 
  top: -43%; 
  width: 100%; 
  height: 40%; 
  text-align: center;
  z-index:10;
  }

  .test {
  background-color: none;  
  border: 3px solid blue;
  border-color: black;
  }

  

  </style>

  </body>
